<% @activity =  Activity.find(params[:activity_id]) %>
<div class="modal-header">
  <h5 class="modal-title">Edit <%= @activity.activityable_type.capitalize %></h5>
  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<!-- meal form -->
<% if @activity.activityable_type == "Meal" %>
  <div class="modal-body">
    <%= form_with(url: "/activities/#{params[:activity_id]}/", method: :patch, class: "activity_edit_form", remote: true) do %>
      <div class='form group'>
        <%= label_tag(:name, "Title:") %>
        <%= text_field_tag :name, @activity.activityable.name, :class => "form-control" %>
      </div>
      <br>
      <div class='form row'>
        <div class='form-group col-md-6'>
          <%= label_tag(:name, "Start Time:") %>
          <%= time_field_tag :start_time, @activity.start_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
        <div class='form-group col-md-6'>
          <%= label_tag(:end_time, "End Time:") %>
          <%= time_field_tag :end_time, @activity.end_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
      </div>
      <div class='form group'>
        <%= label_tag(:restaurant, "Restaurant:") %>
        <div class="autocomplete" id="restaurants">
          </label><%= text_field_tag :restaurant, @activity.activityable.restaurant.name, :class => "form-control", :id => "query" %>
          <div class="results"></div>
        </div>
      </div>
      <br>
      <div class='form group'>
        <%= label_tag(:name, "Address:") %>
        <%= text_field_tag :address, @activity.activityable.restaurant.address, :class => "form-control", :id => "restaurant_address" %>
      </div>
      <div class='form group'>
        <%= label_tag(:notes, "Notes:") %>
        <%= text_field_tag :notes, @activity.notes, :class => "form-control" %>
      </div>
      <%= hidden_field_tag 'activity_type', "Meal" %>
      <%= hidden_field_tag 'date', @activity.start_time.to_date %>
      <br>
      <div class='form group float-right mb-4'>
        <button type="button" class="btn btn-light" data-dismiss="modal">Discard</button>
        <%= submit_tag("Modify Meal", class: 'submitActivity btn btn-secondary') %>
      </div>
      <br>
    <% end %>
  </div>
<% end %>

<!-- attraction form -->
<% if @activity.activityable_type == "Attraction" %>
  <div class="modal-body">
    <%= form_with(url: "/activities/#{params[:activity_id]}/", method: :patch, class: "activity_edit_form", remote: true) do %>
      <div class='form group'>
        <%= label_tag(:attraction, "Attraction:") %>
        <div class="autocomplete" id="attractions">
          </label><%= text_field_tag :attraction, @activity.activityable.name, :class => "form-control", :id => "query" %>
          <div class="results"></div>
        </div>
      </div>
      <br>
      <div class='form row'>
        <div class='form-group col-md-6'>
          <%= label_tag(:name, "Start Time:") %>
          <%= time_field_tag :start_time, @activity.start_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
        <div class='form-group col-md-6'>
          <%= label_tag(:end_time, "End Time:") %>
          <%= time_field_tag :end_time, @activity.end_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
      </div>
      <%= hidden_field_tag 'activity_type', "Attraction" %>
      <%= hidden_field_tag 'date', @activity.start_time.to_date %>
      <br>
      <div class='form group'>
        <%= label_tag(:notes, "Notes:") %>
        <%= text_field_tag :notes, @activity.notes, :class => "form-control" %>
      </div>
      <div class='form group float-right mb-4'>
        <button type="button" class="btn btn-light" data-dismiss="modal">Discard</button>
        <%= submit_tag("Modify Attraction", class: 'submitActivity btn btn-secondary') %>
      </div>
      <br>
    <% end %>
  </div>
<% end %>


<!-- accomodation form -->
<% if @activity.activityable_type == "Accomodation" %>
  <div class="modal-body">
    <%= form_with(url: "/activities/#{params[:activity_id]}/", method: :patch, class: "activity_edit_form", remote: true) do %>
      <div class='form group'>
        <%= label_tag(:name, "Hotel:") %>
        <div class="autocomplete" id="hotels">
          </label><%= text_field_tag :hotel, @activity.activityable.hotel.name, :class => "form-control", :id => "query" %>
          <div class="results"></div>
        </div>
      </div>
      <br>
      <div class='form row'>
        <div class='form-group col-md-6'>
          <%= label_tag(:name, "Start Time:") %>
          <%= time_field_tag :start_time, @activity.start_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
        <div class='form-group col-md-6'>
          <%= label_tag(:end_time, "End Time:") %>
          <%= time_field_tag :end_time, @activity.end_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
      </div>
      <div class='form group'>
        <%= label_tag(:name, "Address:") %>
        <%= text_field_tag :address, @activity.activityable.address, :class => "form-control", :id => "hotel_address" %>
      </div>
      <div class='form group'>
        <%= label_tag(:notes, "Notes:") %>
        <%= text_field_tag :notes, @activity.notes, :class => "form-control" %>
      </div>
      <%= hidden_field_tag 'activity_type', "Accomodation" %>
      <%= hidden_field_tag 'date', @activity.start_time.to_date %>
      <br>
      <div class='form group float-right mb-4'>
        <button type="button" class="btn btn-light" data-dismiss="modal">Discard</button>
        <%= submit_tag("Modify Stay", class: 'submitActivity btn btn-secondary') %>
      </div>
      <br>
    <% end %>
  </div>
<% end %>

<!-- other form -->
<% if @activity.activityable_type == "Other" %>
  <div class="modal-body">
    <%= form_with(url: "/activities/#{params[:activity_id]}/", method: :patch, class: "activity_edit_form", remote: true) do %>
      <div class='form group'>
        <%= label_tag(:name, "Title:") %>
        <%= text_field_tag :name, @activity.activityable.name, :class => "form-control" %>
      </div>
      <br>
      <div class='form row'>
        <div class='form-group col-md-6'>
          <%= label_tag(:name, "Start Time:") %>
          <%= time_field_tag :start_time, @activity.start_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
        <div class='form-group col-md-6'>
          <%= label_tag(:end_time, "End Time:") %>
          <%= time_field_tag :end_time, @activity.end_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
      </div>
      <div class='form group'>
        <%= label_tag(:name, "Address:") %>
        <%= text_field_tag :address, @activity.activityable.address, :class => "form-control" %>
      </div>
      <div class='form group'>
        <%= label_tag(:notes, "Notes:") %>
        <%= text_field_tag :notes, @activity.notes, :class => "form-control" %>
      </div>
      <%= hidden_field_tag 'activity_type', "Other" %>
      <%= hidden_field_tag 'date', @activity.start_time.to_date %>
      <br>
      <div class='form group float-right mb-4'>
        <button type="button" class="btn btn-light" data-dismiss="modal">Discard</button>
        <%= submit_tag("Modify Activity", class: 'submitActivity btn btn-secondary') %>
      </div>
      <br>
    <% end %>
  </div>
<% end %>

<!-- transportation form -->
<% if @activity.activityable_type == "Transportation" %>
  <div class="modal-body">
    <%= form_with(url: "/activities/#{params[:activity_id]}/", method: :patch, class: "activity_edit_form", remote: true) do %>
      <div class='form row'>
        <div class='form-group col-md-6'>
          <%= label_tag(:origin_city, "From:") %>
          <div class="autocomplete" id="cities">
            </label><%= text_field_tag :origin_city, City.find(@activity.activityable.origin_city_id).name, :class => "form-control", :id => "query" %>
            <div class="results"></div>
          </div>
        </div>
        <div class='form-group col-md-6'>
          <%= label_tag(:destination_city, "To:") %>
          <div class="autocomplete" id="cities">
            </label><%= text_field_tag :destination_city, City.find(@activity.activityable.destination_city_id).name, :class => "form-control", :id => "query" %>
            <div class="results"></div>
          </div>
        </div>
      </div>
      <div class='form row'>
        <div class='form-group col-md-6'>
          <%= label_tag(:name, "Start Time:") %>
          <%= time_field_tag :start_time, @activity.start_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
        <div class='form-group col-md-6'>
          <%= label_tag(:end_time, "End Time:") %>
          <%= time_field_tag :end_time, @activity.end_time.strftime("%H:%M"), :class => "form-control" %>
        </div>
      </div>
      <div class='form group'>
        <%= label_tag(:name, "Transportation type:") %>
        <%= text_field_tag :transportation_type, @activity.activityable.transportation_type, :class => "form-control" %>
      </div>
      <div class='form group'>
        <%= label_tag(:notes, "Notes:") %>
        <%= text_field_tag :notes, @activity.notes, :class => "form-control" %>
      </div>
      <%= hidden_field_tag 'activity_type', "Transportation" %>
      <%= hidden_field_tag 'date', @activity.start_time.to_date %>
      <br>
      <div class='form group float-right mb-4'>
        <button type="button" class="btn btn-light" data-dismiss="modal">Discard</button>
        <%= submit_tag("Modify Transit", class: 'submitActivity btn btn-secondary') %>
      </div>
      <br>
    <% end %>
  </div>
<% end %>
