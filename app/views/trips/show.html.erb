<div class= 'container' style='list-style-type:none'>
  <h4><%= @trip.name %></h4>
  <h6>From <%= @trip.start_date.strftime("%b %e") %> to <%= @trip.end_date.strftime("%b %e, %Y") %> </h6>
  <br />
    <% @trip.parts.each do |part|%>
      <h5> <%= part.name %> </h5>
        <div class= 'container'>
        <% part.part_dates_array.each do |date|%>
          <h6> <%= date.strftime("%A, %b %e") %> </h6>
            <% @activities.each do |act| %>
                <% if act.start_time.day == date.day %>
                    <div class= 'container'>
                      <span><b><%= act.start_time.strftime("%H:%M") %></b></span>  <span><%= act.activityable_type %></span>
                      <%= link_to "Delete", act, method: :delete, remote: true %>
                    </div>
                <% else "" %>
                <% end %>
            <% end %>
            <div class= 'container'>
              <span><p type="button" class="btn btn-light btn-sm" data-toggle="modal" data-target="#activityModal"> + </p></span>
            </div>
          <br />
        <% end %>
      </div>
    <% end %>
    <button type="button" class="btn btn-secondary btn" data-toggle="modal" data-target="#partModal">
      + Part
    </button>
  </div>
</div>




<div class="modal fade" id="partModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <%= simple_form_for([@trip, @part_new], remote: true) do |f| %>
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">New Part</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <%= f.input :name, required: true %>
          <%= f.input :start_date, required: true %>
          <%= f.input :end_date, required: true %>
          <%= f.association :city, collection: City.all %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
        <%= f.button :submit, class: 'btn btn-primary' %>
      </div>
      <%end%>
    </div>
  </div>
</div>












<!--Modal: Activity-->
<div class="modal fade" id="activityModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog cascading-modal" role="document">
    <!--Content-->
    <div class="modal-content">

      <!--Modal cascading tabs-->
      <div class="modal-c-tabs">

        <!-- Nav tabs -->
        <ul class="nav nav-tabs md-tabs tabs-2 light-blue darken-3" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#panel7" role="tab"><i class="fas fa-user mr-1"></i>
              Meal</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#panel8" role="tab"><i class="fas fa-user-plus mr-1"></i>
              Attraction</a>
          </li>
        </ul>

        <!-- Tab panels -->
        <div class="tab-content">
          <!--Meal-->
          <div class="tab-pane fade in show active" id="panel7" role="tabpanel">

            <%= simple_form_for [@part, @activity] do |f| %>
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">New Activity</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <% f.input :activityable_type, required: true, default: 'Meal' %>
                    <%= f.simple_fields_for :activityable do |m| %>
                      <%= m.input :name %>
                      <%= m.input :address %>
                    <% end %>
                <%= f.input :start_time, required: true %>
                <%= f.input :end_time, required: true %>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                <%= f.button :submit, class: 'btn btn-primary' %>
              </div>
            <%end%>
          </div>
          <!--/.Meal-->

          <!--Attraction -->
          <div class="tab-pane fade" id="panel8" role="tabpanel">

            <%= simple_form_for [@part, @activity] do |f| %>
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">New Activity</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <%= f.input :activityable_type, required: true, collection: %w[Meal Accomodation Transportation Attraction ] %>
                <%= f.input :start_time, required: true %>
                <%= f.input :end_time, required: true %>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                <%= f.button :submit, class: 'btn btn-primary' %>
              </div>
            <%end%>
          </div>
          <!--/.Attraction-->

        </div>

      </div>
    </div>
    <!--/.Content-->
  </div>
</div>
<!--Modal: Login / Register Form-->

<div class="text-center">
  <a href="" class="btn btn-default btn-rounded my-3" data-toggle="modal" data-target="#activityModal">New Activity</a>
</div>

